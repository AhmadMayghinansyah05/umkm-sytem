{% extends "base.html" %}
{% block title %}Input Data Penjualan - Sistem UMKM{% endblock %}
{% block content %}
<div class="flex min-h-screen bg-gray-50">
    <!-- Sidebar -->
    <div class="fixed left-0 top-0 h-full w-64 bg-white border-r p-6">
        <div class="flex items-center gap-3 mb-8">
            <div class="p-2 bg-blue-600 rounded-lg">
                <i class="fas fa-shopping-bag text-white"></i>
            </div>
            <div>
                <h2 class="font-bold text-gray-800">Sistem UMKM</h2>
                <p class="text-xs text-gray-500">Dashboard</p>
            </div>
        </div>
        
        <nav class="space-y-1">
            <a href="/dashboard" class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-gray-50">
                <i class="fas fa-home"></i><span>Dashboard</span>
            </a>
            <a href="/input-penjualan" class="flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 font-semibold">
                <i class="fas fa-dollar-sign"></i><span>Input Penjualan</span>
            </a>
            <a href="/prediksi" class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-gray-50">
                <i class="fas fa-chart-line"></i><span>Prediksi</span>
            </a>
            <a href="/rekomendasi" class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-gray-50">
                <i class="fas fa-box"></i><span>Rekomendasi</span>
            </a>
            <a href="/aktivitas-log" class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-gray-50">
                <i class="fas fa-history"></i><span>Log Aktivitas</span>
            </a>
        </nav>
        
        <div class="absolute bottom-6 left-6 right-6">
            <div class="bg-gray-50 rounded-lg p-4 mb-3">
                <p class="text-xs text-gray-500">Akun</p>
                <p class="text-sm font-semibold">{{user_name if user_name else 'Toko Berkah Jaya'}}</p>
            </div>
            <a href="/logout" class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-sign-out-alt"></i><span>Keluar</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="ml-64 flex-1 p-8">
        <!-- Header -->
        <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-2">Input Data Penjualan</h1>
            <p class="text-gray-600">Masukkan data transaksi penjualan harian untuk analisis dan prediksi</p>
        </div>

        {% if success %}
        <div class="mb-6 p-4 bg-emerald-50 border border-emerald-200 rounded-xl flex items-center gap-3">
            <i class="fas fa-check-circle text-emerald-600 text-2xl"></i>
            <div>
                <p class="font-semibold text-emerald-800">Data Berhasil Disimpan!</p>
                <p class="text-sm text-emerald-600">Data penjualan telah ditambahkan ke sistem</p>
            </div>
        </div>
        {% endif %}

        <div class="grid grid-cols-3 gap-6">
            <!-- Form Input (2 kolom) -->
            <div class="col-span-2 bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center gap-3 mb-6 pb-4 border-b">
                    <div class="p-3 bg-blue-50 rounded-lg">
                        <i class="fas fa-receipt text-blue-600 text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold text-gray-800">Form Input Penjualan</h2>
                        <p class="text-sm text-gray-500">Isi semua field yang tersedia</p>
                    </div>
                </div>

                <form method="POST" class="space-y-6">
                    <!-- Informasi Transaksi -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-info-circle text-blue-600"></i>
                            Informasi Transaksi
                        </h3>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Tanggal Transaksi <span class="text-red-500">*</span>
                                </label>
                                <input type="date" name="tanggal" required 
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    value="2024-12-20">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nomor Invoice
                                </label>
                                <input type="text" name="invoice" 
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="INV-001" value="INV-20241220-001">
                            </div>
                        </div>
                    </div>

                    <!-- Detail Produk -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-box text-blue-600"></i>
                            Detail Produk
                        </h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nama Produk <span class="text-red-500">*</span>
                                </label>
                                <select name="produk" required
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih Produk</option>
                                    <option value="kopi_arabika">Kopi Arabika Premium</option>
                                    <option value="teh_herbal">Teh Herbal Organik</option>
                                    <option value="keripik_singkong">Keripik Singkong</option>
                                    <option value="sambal_matah">Sambal Matah Kemasan</option>
                                    <option value="abon_sapi">Abon Sapi Spesial</option>
                                </select>
                            </div>

                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Jumlah (Unit) <span class="text-red-500">*</span>
                                    </label>
                                    <input type="number" name="jumlah" required min="1"
                                        class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="10" id="jumlah" oninput="hitungTotal()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Harga Satuan (Rp) <span class="text-red-500">*</span>
                                    </label>
                                    <input type="number" name="harga_satuan" required min="0"
                                        class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="50000" id="harga" oninput="hitungTotal()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Total Harga (Rp)
                                    </label>
                                    <input type="number" name="total_harga" readonly
                                        class="w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-lg"
                                        id="total" value="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Metode Pembayaran -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-credit-card text-blue-600"></i>
                            Metode Pembayaran
                        </h3>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Metode <span class="text-red-500">*</span>
                                </label>
                                <select name="metode_pembayaran" required
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih Metode</option>
                                    <option value="cash">Tunai</option>
                                    <option value="transfer">Transfer Bank</option>
                                    <option value="ewallet">E-Wallet (GoPay, OVO, Dana)</option>
                                    <option value="qris">QRIS</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Status Pembayaran <span class="text-red-500">*</span>
                                </label>
                                <select name="status_pembayaran" required
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih Status</option>
                                    <option value="lunas">Lunas</option>
                                    <option value="pending">Pending</option>
                                    <option value="cicilan">Cicilan</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Informasi Pelanggan (Opsional) -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-user text-blue-600"></i>
                            Informasi Pelanggan (Opsional)
                        </h3>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nama Pelanggan
                                </label>
                                <input type="text" name="nama_pelanggan"
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Nama pelanggan">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nomor Telepon
                                </label>
                                <input type="tel" name="telepon_pelanggan"
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="08123456789">
                            </div>
                        </div>
                    </div>

                    <!-- Catatan -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Catatan Tambahan
                        </label>
                        <textarea name="catatan" rows="3"
                            class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="Catatan atau keterangan tambahan..."></textarea>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-3 pt-4 border-t">
                        <button type="submit" 
                            class="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2">
                            <i class="fas fa-save"></i>
                            Simpan Data Penjualan
                        </button>
                        <button type="reset" 
                            class="px-6 py-3 border border-gray-200 text-gray-600 rounded-lg font-semibold hover:bg-gray-50 transition">
                            <i class="fas fa-redo"></i>
                            Reset
                        </button>
                    </div>
                </form>
            </div>

            <!-- Info Panel (1 kolom) -->
            <div class="space-y-6">
                <!-- Quick Stats -->
                <div class="bg-white rounded-xl shadow-sm border p-6">
                    <h3 class="font-semibold text-gray-800 mb-4">Statistik Hari Ini</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                            <div>
                                <p class="text-sm text-gray-600">Total Transaksi</p>
                                <p class="text-xl font-bold text-blue-600">12</p>
                            </div>
                            <i class="fas fa-shopping-cart text-blue-600 text-2xl"></i>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-emerald-50 rounded-lg">
                            <div>
                                <p class="text-sm text-gray-600">Total Pendapatan</p>
                                <p class="text-xl font-bold text-emerald-600">Rp 2.4jt</p>
                            </div>
                            <i class="fas fa-money-bill-wave text-emerald-600 text-2xl"></i>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                            <div>
                                <p class="text-sm text-gray-600">Produk Terjual</p>
                                <p class="text-xl font-bold text-purple-600">48 Unit</p>
                            </div>
                            <i class="fas fa-box text-purple-600 text-2xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Panduan -->
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6">
                    <div class="flex items-start gap-3 mb-4">
                        <i class="fas fa-lightbulb text-blue-600 text-xl"></i>
                        <div>
                            <h3 class="font-semibold text-gray-800 mb-2">Tips Input Data</h3>
                            <ul class="text-sm text-gray-600 space-y-2">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-1"></i>
                                    <span>Input data setiap hari untuk prediksi akurat</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-1"></i>
                                    <span>Pastikan harga dan jumlah sudah benar</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-1"></i>
                                    <span>Data pelanggan membantu analisis</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-1"></i>
                                    <span>Gunakan catatan untuk info penting</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Riwayat Terakhir -->
                <div class="bg-white rounded-xl shadow-sm border p-6">
                    <h3 class="font-semibold text-gray-800 mb-4">Transaksi Terakhir</h3>
                    <div class="space-y-3">
                        <div class="p-3 border border-gray-100 rounded-lg">
                            <p class="font-medium text-gray-800 text-sm">Kopi Arabika - 5 unit</p>
                            <p class="text-xs text-gray-500">Rp 250,000 • 10 menit lalu</p>
                        </div>
                        <div class="p-3 border border-gray-100 rounded-lg">
                            <p class="font-medium text-gray-800 text-sm">Teh Herbal - 3 unit</p>
                            <p class="text-xs text-gray-500">Rp 150,000 • 1 jam lalu</p>
                        </div>
                        <div class="p-3 border border-gray-100 rounded-lg">
                            <p class="font-medium text-gray-800 text-sm">Keripik Singkong - 10 unit</p>
                            <p class="text-xs text-gray-500">Rp 200,000 • 2 jam lalu</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function hitungTotal() {
    const jumlah = document.getElementById('jumlah').value || 0;
    const harga = document.getElementById('harga').value || 0;
    const total = jumlah * harga;
    document.getElementById('total').value = total;
}
</script>

{% endblock %}